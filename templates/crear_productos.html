<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Producto</title>
    <link rel="stylesheet" href="../static/css/producto.css">
    <style>
    </style>
</head>
<body>
    <div class="contenedor-principal">
        <!-- Icono en la parte superior -->
        <div class="contenedor-icono">
            <div class="icono-producto">
                <i class="fas fa-box"></i>
            </div>
        </div>
        
        <h1 class="titulo">Crear Producto</h1>
        
        <!-- Enlace para crear categoría -->
        <div class="enlace-categoria">
            <p>¿Ya creaste categoría? <a href="/crearCategoria/producto" id="enlaceCrearCategoria">Crear categoría</a></p>
        </div>
        
        <form id="formularioProducto" action="/crearProductoComprobar" method="post" enctype="multipart/form-data">
            <div class="grupo-formulario">
                <label for="categoria">Escoja la categoría para el producto</label>
                <select id="categoria" name="categoria" required>
                    <option value="ninguna">Escoja una categoria</option>
                    {% for categoria in categorias %}
                        <option value="{{categoria[0]}}">{{categoria[2]}}</option>
                    {% endfor %}
                </select>
                <div class="mensaje-error" id="errorCategoria">
                    Debe seleccionar una categoría.
                </div>
            </div>
            
            <div class="grupo-formulario">
                <label for="nombreProducto">Nombre del producto</label>
                <input type="text" name="nombre_producto" list="nombre_producto" id="nombreProducto" placeholder="Ingrese el nombre del producto" minlength="3", maxlength="183", pattern="[a-zA-Z0-9\ ]{3,183}", required, autocomplete="on", tabindex="1">
                <datalist id="nombre_producto">
                    {% for producto in productos %}
                        <option value="{{producto[1]}}">
                    {% endfor %}
                </datalist>
                <p id="campo_error_nombre"></p>
            </div>
            
            <div class="grupo-formulario">
                <label for="descripcion">Descripción del producto</label>
                <textarea id="descripcion" name="descripcion_producto" placeholder="Ingrese la descripción del producto" rows="3" minlength="6", maxlength="150", pattern="[a-zA-Z0-9\ ]{6,150}", required, autocomplete="on", tabindex="1"></textarea>
                <p id="campo_error_descripcion"></p>
            </div>
            
            
            <div class="grupo-formulario">
                <label for="presentacion">Presentación del producto</label>
                <input type="text" id="presentacion" name="presentacion_producto" placeholder="Ej: Porción individual, para dos personas, familiar" minlength="6", maxlength="150", pattern="[a-zA-Z0-9\ ]{6,150}", required, autocomplete="on", tabindex="1">
                <div class="ejemplo-presentacion">
                    Ejemplos: Porción individual, Para dos personas, Familiar, Personal, Mediana, Grande
                </div>
                <p id="campo_error_presentacion"></p>
            </div>
            
            
            <div class="grupo-formulario">
                <label for="precio">Precio del producto</label>
                <input type="number" id="precio" name="precio_producto" placeholder="0.00" min="0" step="0.01" required>
                <div class="mensaje-error" id="errorPrecio">
                    El precio debe ser mayor a 0.
                </div>
                <p id="campo_error_precio"></p>
            </div>
            
            
            <!-- Sección de subida de imagen del producto -->
            <div class="seccion-imagen" id="seccionImagen" role="button" tabindex="0" dropzone="inputImagen">
                <div class="contenedor-subida">
                    <!-- input tiene aria-describedby para asociar el texto del nombre/errores -->
                    <input type="file" id="inputImagen" name="imagen_producto" class="input" accept="image/*" aria-describedby="infoArchivo" aria-label="Subir logo de la empresa">
                    <i class="fas fa-cloud-upload-alt icono-subida" aria-hidden="true"></i>
                    <div class="texto-wrap">
                        <p class="texto-subida">Haga clic para subir logo o arrastre una imagen PNG</p>
                        <p class="info-archivo" id="infoArchivo">No se ha seleccionado archivo</p>
                    </div>
                    <img id="vistaPreviaImagen" class="vista-previa" alt="Vista previa de la imagen subida">
                </div>
                <!-- región live para anunciar errores o estados accesibles -->
                <div id="mensajeImagen" class="oculto" aria-live="polite"></div>
            </div>
            
            <!-- Contenedor de botones -->
            <div class="contenedor-botones">
                <a href="/productos" class="boton boton-regresar" id="botonRegresar">
                    <i class="fas fa-arrow-left"></i>
                    Regresar
                </a>
                <button type="submit" id="boton" class="boton boton-crear">
                    <i class="fas fa-plus-circle"></i>
                    Crear Producto
                </button>
                <p>{{msg}}</p>
            </div>
        </form>
    </div>
    <script src="../static/js/productos.js"></script>
</body>
</html>